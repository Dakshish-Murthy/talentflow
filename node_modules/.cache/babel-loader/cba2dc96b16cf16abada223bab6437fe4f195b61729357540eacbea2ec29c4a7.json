{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useCallback } from 'react';\nimport { useAppDispatch, useAppSelector } from './redux';\nimport { fetchCandidates, updateCandidate, addCandidateNote, fetchCandidateTimeline, setFilters, setPagination, setCurrentCandidate, optimisticStageChange, rollbackStageChange } from '../store/slices/candidatesSlice';\nexport const useCandidates = () => {\n  _s();\n  const dispatch = useAppDispatch();\n  const {\n    candidates,\n    currentCandidate,\n    loading,\n    error,\n    pagination,\n    filters\n  } = useAppSelector(state => state.candidates);\n  const loadCandidates = useCallback(params => {\n    return dispatch(fetchCandidates(params));\n  }, [dispatch]);\n  const updateCandidateStage = useCallback(async (candidateId, newStage) => {\n    const candidate = candidates.find(c => c.id === candidateId);\n    if (!candidate) return;\n    const oldStage = candidate.stage;\n\n    // Optimistic update\n    dispatch(optimisticStageChange({\n      candidateId,\n      newStage\n    }));\n    try {\n      await dispatch(updateCandidate({\n        id: candidateId,\n        updates: {\n          stage: newStage\n        }\n      })).unwrap();\n    } catch (error) {\n      // Rollback on failure\n      dispatch(rollbackStageChange({\n        candidateId,\n        oldStage\n      }));\n      throw error;\n    }\n  }, [dispatch, candidates]);\n  const addNote = useCallback((candidateId, note) => {\n    return dispatch(addCandidateNote({\n      candidateId,\n      note\n    }));\n  }, [dispatch]);\n  const loadTimeline = useCallback(candidateId => {\n    return dispatch(fetchCandidateTimeline(candidateId));\n  }, [dispatch]);\n  const updateFilters = useCallback(newFilters => {\n    dispatch(setFilters(newFilters));\n  }, [dispatch]);\n  const updatePagination = useCallback(newPagination => {\n    dispatch(setPagination(newPagination));\n  }, [dispatch]);\n  const selectCandidate = useCallback(candidate => {\n    dispatch(setCurrentCandidate(candidate));\n  }, [dispatch]);\n  const createCandidate = useCallback(async candidateData => {\n    const response = await api.createCandidate(candidateData);\n    return response;\n  }, []);\n  return {\n    // State\n    candidates,\n    currentCandidate,\n    loading,\n    error,\n    pagination,\n    filters,\n    // Actions\n    loadCandidates,\n    updateCandidateStage,\n    addNote,\n    loadTimeline,\n    updateFilters,\n    updatePagination,\n    selectCandidate,\n    createCandidate\n  };\n};\n_s(useCandidates, \"8Dreg/2k5vNv7yn46ulTNV7tdOM=\", false, function () {\n  return [useAppDispatch, useAppSelector];\n});","map":{"version":3,"names":["useCallback","useAppDispatch","useAppSelector","fetchCandidates","updateCandidate","addCandidateNote","fetchCandidateTimeline","setFilters","setPagination","setCurrentCandidate","optimisticStageChange","rollbackStageChange","useCandidates","_s","dispatch","candidates","currentCandidate","loading","error","pagination","filters","state","loadCandidates","params","updateCandidateStage","candidateId","newStage","candidate","find","c","id","oldStage","stage","updates","unwrap","addNote","note","loadTimeline","updateFilters","newFilters","updatePagination","newPagination","selectCandidate","createCandidate","candidateData","response","api"],"sources":["C:/Users/Dakshish/talentflow/src/hooks/useCandidates.ts"],"sourcesContent":["import { useCallback } from 'react';\r\nimport { useAppDispatch, useAppSelector } from './redux';\r\nimport {\r\n  fetchCandidates,\r\n  updateCandidate,\r\n  addCandidateNote,\r\n  fetchCandidateTimeline,\r\n  setFilters,\r\n  setPagination,\r\n  setCurrentCandidate,\r\n  optimisticStageChange,\r\n  rollbackStageChange,\r\n} from '../store/slices/candidatesSlice';\r\nimport { Candidate, Note } from '../types';\r\nimport { kMaxLength } from 'buffer';\r\n\r\nexport const useCandidates = () => {\r\n  const dispatch = useAppDispatch();\r\n  const { candidates, currentCandidate, loading, error, pagination, filters } = useAppSelector(\r\n    (state) => state.candidates\r\n  );\r\n\r\n  const loadCandidates = useCallback((params?: any) => {\r\n    return dispatch(fetchCandidates(params));\r\n  }, [dispatch]);\r\n\r\n  const updateCandidateStage = useCallback(async (candidateId: string, newStage: Candidate['stage']) => {\r\n    const candidate = candidates.find(c => c.id === candidateId);\r\n    if (!candidate) return;\r\n\r\n    const oldStage = candidate.stage;\r\n    \r\n    // Optimistic update\r\n    dispatch(optimisticStageChange({ candidateId, newStage }));\r\n    \r\n    try {\r\n      await dispatch(updateCandidate({ id: candidateId, updates: { stage: newStage } })).unwrap();\r\n    } catch (error) {\r\n      // Rollback on failure\r\n      dispatch(rollbackStageChange({ candidateId, oldStage }));\r\n      throw error;\r\n    }\r\n  }, [dispatch, candidates]);\r\n\r\n  const addNote = useCallback((candidateId: string, note: Omit<Note, 'id' | 'createdAt'>) => {\r\n    return dispatch(addCandidateNote({ candidateId, note }));\r\n  }, [dispatch]);\r\n\r\n  const loadTimeline = useCallback((candidateId: string) => {\r\n    return dispatch(fetchCandidateTimeline(candidateId));\r\n  }, [dispatch]);\r\n\r\n  const updateFilters = useCallback((newFilters: Partial<typeof filters>) => {\r\n    dispatch(setFilters(newFilters));\r\n  }, [dispatch]);\r\n\r\n  const updatePagination = useCallback((newPagination: Partial<typeof pagination>) => {\r\n    dispatch(setPagination(newPagination));\r\n  }, [dispatch]);\r\n\r\n  const selectCandidate = useCallback((candidate: Candidate | null) => {\r\n    dispatch(setCurrentCandidate(candidate));\r\n  }, [dispatch]);\r\n\r\n  const createCandidate = useCallback(async (candidateData: Omit<Candidate, 'id' | 'appliedDate' | 'notes'>) => {\r\n    const response = await api.createCandidate(candidateData);\r\n    return response;\r\n  }, []);\r\n\r\n  return {\r\n    // State\r\n    candidates,\r\n    currentCandidate,\r\n    loading,\r\n    error,\r\n    pagination,\r\n    filters,\r\n\r\n    // Actions\r\n    loadCandidates,\r\n    updateCandidateStage,\r\n    addNote,\r\n    loadTimeline,\r\n    updateFilters,\r\n    updatePagination,\r\n    selectCandidate,\r\n    createCandidate,\r\n  };\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}