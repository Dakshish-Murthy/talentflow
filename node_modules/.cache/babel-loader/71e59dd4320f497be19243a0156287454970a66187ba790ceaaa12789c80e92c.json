{"ast":null,"code":"import { db } from './database'; // Use the correct export\n\nexport const candidatesService = {\n  async createCandidate(candidateData) {\n    const candidate = {\n      ...candidateData,\n      id: `candidate-${Date.now()}`,\n      appliedDate: new Date(),\n      // Use Date object instead of string\n      notes: candidateData.notes || [] // Ensure notes is an array\n    };\n    await db.candidates.add(candidate);\n    return candidate;\n  },\n  async getCandidates(filters) {\n    let collection = db.candidates;\n\n    // Apply filters\n    if (filters.search) {\n      collection = collection.where('name').startsWithIgnoreCase(filters.search).or('email').startsWithIgnoreCase(filters.search);\n    }\n    if (filters.stage) {\n      collection = collection.where('stage').equals(filters.stage);\n    }\n    const total = await collection.count();\n    const candidates = await collection.offset((filters.page - 1) * filters.pageSize).limit(filters.pageSize).toArray();\n    return {\n      candidates,\n      total,\n      page: filters.page,\n      pageSize: filters.pageSize,\n      totalPages: Math.ceil(total / filters.pageSize)\n    };\n  },\n  async updateCandidateStage(id, stage) {\n    await db.candidates.update(id, {\n      stage\n    });\n  },\n  async addNote(candidateId, note) {\n    const candidate = await db.candidates.get(candidateId);\n    if (candidate) {\n      const newNote = {\n        ...note,\n        id: `note-${Date.now()}`,\n        timestamp: new Date()\n      };\n      const updatedNotes = [...(candidate.notes || []), newNote];\n      await db.candidates.update(candidateId, {\n        notes: updatedNotes\n      });\n    }\n  },\n  async getCandidateById(id) {\n    return await db.candidates.get(id);\n  }\n};","map":{"version":3,"names":["db","candidatesService","createCandidate","candidateData","candidate","id","Date","now","appliedDate","notes","candidates","add","getCandidates","filters","collection","search","where","startsWithIgnoreCase","or","stage","equals","total","count","offset","page","pageSize","limit","toArray","totalPages","Math","ceil","updateCandidateStage","update","addNote","candidateId","note","get","newNote","timestamp","updatedNotes","getCandidateById"],"sources":["C:/Users/Dakshish/talentflow/src/services/candidatesService.ts"],"sourcesContent":["import { Candidate, Note } from '../types';\r\nimport { db } from './database'; // Use the correct export\r\n\r\nexport const candidatesService = {\r\n  async createCandidate(candidateData: Omit<Candidate, 'id' | 'appliedDate'>): Promise<Candidate> {\r\n    const candidate: Candidate = {\r\n      ...candidateData,\r\n      id: `candidate-${Date.now()}`,\r\n      appliedDate: new Date(), // Use Date object instead of string\r\n      notes: candidateData.notes || [], // Ensure notes is an array\r\n    };\r\n    \r\n    await db.candidates.add(candidate);\r\n    return candidate;\r\n  },\r\n\r\n  async getCandidates(filters: {\r\n    page: number;\r\n    pageSize: number;\r\n    search?: string;\r\n    stage?: string;\r\n  }) {\r\n    let collection = db.candidates;\r\n    \r\n    // Apply filters\r\n    if (filters.search) {\r\n      collection = collection.where('name').startsWithIgnoreCase(filters.search)\r\n                            .or('email').startsWithIgnoreCase(filters.search);\r\n    }\r\n    \r\n    if (filters.stage) {\r\n      collection = collection.where('stage').equals(filters.stage);\r\n    }\r\n\r\n    const total = await collection.count();\r\n    const candidates = await collection.offset((filters.page - 1) * filters.pageSize)\r\n                                      .limit(filters.pageSize)\r\n                                      .toArray();\r\n\r\n    return {\r\n      candidates,\r\n      total,\r\n      page: filters.page,\r\n      pageSize: filters.pageSize,\r\n      totalPages: Math.ceil(total / filters.pageSize),\r\n    };\r\n  },\r\n\r\n  async updateCandidateStage(id: string, stage: Candidate['stage']): Promise<void> {\r\n    await db.candidates.update(id, { stage });\r\n  },\r\n\r\n  async addNote(candidateId: string, note: Omit<Note, 'id' | 'timestamp'>): Promise<void> {\r\n    const candidate = await db.candidates.get(candidateId);\r\n    if (candidate) {\r\n      const newNote: Note = {\r\n        ...note,\r\n        id: `note-${Date.now()}`,\r\n        timestamp: new Date(),\r\n      };\r\n      \r\n      const updatedNotes = [...(candidate.notes || []), newNote];\r\n      await db.candidates.update(candidateId, { notes: updatedNotes });\r\n    }\r\n  },\r\n\r\n  async getCandidateById(id: string): Promise<Candidate | undefined> {\r\n    return await db.candidates.get(id);\r\n  },\r\n};"],"mappings":"AACA,SAASA,EAAE,QAAQ,YAAY,CAAC,CAAC;;AAEjC,OAAO,MAAMC,iBAAiB,GAAG;EAC/B,MAAMC,eAAeA,CAACC,aAAoD,EAAsB;IAC9F,MAAMC,SAAoB,GAAG;MAC3B,GAAGD,aAAa;MAChBE,EAAE,EAAE,aAAaC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE;MAC7BC,WAAW,EAAE,IAAIF,IAAI,CAAC,CAAC;MAAE;MACzBG,KAAK,EAAEN,aAAa,CAACM,KAAK,IAAI,EAAE,CAAE;IACpC,CAAC;IAED,MAAMT,EAAE,CAACU,UAAU,CAACC,GAAG,CAACP,SAAS,CAAC;IAClC,OAAOA,SAAS;EAClB,CAAC;EAED,MAAMQ,aAAaA,CAACC,OAKnB,EAAE;IACD,IAAIC,UAAU,GAAGd,EAAE,CAACU,UAAU;;IAE9B;IACA,IAAIG,OAAO,CAACE,MAAM,EAAE;MAClBD,UAAU,GAAGA,UAAU,CAACE,KAAK,CAAC,MAAM,CAAC,CAACC,oBAAoB,CAACJ,OAAO,CAACE,MAAM,CAAC,CACnDG,EAAE,CAAC,OAAO,CAAC,CAACD,oBAAoB,CAACJ,OAAO,CAACE,MAAM,CAAC;IACzE;IAEA,IAAIF,OAAO,CAACM,KAAK,EAAE;MACjBL,UAAU,GAAGA,UAAU,CAACE,KAAK,CAAC,OAAO,CAAC,CAACI,MAAM,CAACP,OAAO,CAACM,KAAK,CAAC;IAC9D;IAEA,MAAME,KAAK,GAAG,MAAMP,UAAU,CAACQ,KAAK,CAAC,CAAC;IACtC,MAAMZ,UAAU,GAAG,MAAMI,UAAU,CAACS,MAAM,CAAC,CAACV,OAAO,CAACW,IAAI,GAAG,CAAC,IAAIX,OAAO,CAACY,QAAQ,CAAC,CAC9CC,KAAK,CAACb,OAAO,CAACY,QAAQ,CAAC,CACvBE,OAAO,CAAC,CAAC;IAE5C,OAAO;MACLjB,UAAU;MACVW,KAAK;MACLG,IAAI,EAAEX,OAAO,CAACW,IAAI;MAClBC,QAAQ,EAAEZ,OAAO,CAACY,QAAQ;MAC1BG,UAAU,EAAEC,IAAI,CAACC,IAAI,CAACT,KAAK,GAAGR,OAAO,CAACY,QAAQ;IAChD,CAAC;EACH,CAAC;EAED,MAAMM,oBAAoBA,CAAC1B,EAAU,EAAEc,KAAyB,EAAiB;IAC/E,MAAMnB,EAAE,CAACU,UAAU,CAACsB,MAAM,CAAC3B,EAAE,EAAE;MAAEc;IAAM,CAAC,CAAC;EAC3C,CAAC;EAED,MAAMc,OAAOA,CAACC,WAAmB,EAAEC,IAAoC,EAAiB;IACtF,MAAM/B,SAAS,GAAG,MAAMJ,EAAE,CAACU,UAAU,CAAC0B,GAAG,CAACF,WAAW,CAAC;IACtD,IAAI9B,SAAS,EAAE;MACb,MAAMiC,OAAa,GAAG;QACpB,GAAGF,IAAI;QACP9B,EAAE,EAAE,QAAQC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE;QACxB+B,SAAS,EAAE,IAAIhC,IAAI,CAAC;MACtB,CAAC;MAED,MAAMiC,YAAY,GAAG,CAAC,IAAInC,SAAS,CAACK,KAAK,IAAI,EAAE,CAAC,EAAE4B,OAAO,CAAC;MAC1D,MAAMrC,EAAE,CAACU,UAAU,CAACsB,MAAM,CAACE,WAAW,EAAE;QAAEzB,KAAK,EAAE8B;MAAa,CAAC,CAAC;IAClE;EACF,CAAC;EAED,MAAMC,gBAAgBA,CAACnC,EAAU,EAAkC;IACjE,OAAO,MAAML,EAAE,CAACU,UAAU,CAAC0B,GAAG,CAAC/B,EAAE,CAAC;EACpC;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}